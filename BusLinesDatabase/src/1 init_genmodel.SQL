/*
Created: 02-Dec-16
Modified: 15-Jan-17
Model: Oracle 11g Release 2
Database: Oracle 11g Release 2
*/


-- Create tables section -------------------------------------------------

-- Table DRIVES

CREATE TABLE "DRIVES"(
  "DRIVE_ID" Integer NOT NULL,
  "CITY_FROM" Varchar2(30 ) NOT NULL,
  "CITY_TO" Varchar2(30 ) NOT NULL
)
/

-- Add keys for table DRIVES

ALTER TABLE "DRIVES" ADD CONSTRAINT "Key1" PRIMARY KEY ("DRIVE_ID")
/

-- Table TIME_TABLE_POSITIONS

CREATE TABLE "TIME_TABLE_POSITIONS"(
  "TIME_TABLE_POSITION_ID" Integer NOT NULL,
  "DRIVE_ID" Integer NOT NULL,
  "WEEK_DAY" Varchar2(30 ) NOT NULL,
  "LEAVING_HOUR" Varchar2(30 ),
  "REGISTER_TELEPHONE_NUMBER" Varchar2(30 ),
  "TIME_CATEGORY_RATE" Float
)
/

-- Create indexes for table TIME_TABLE_POSITIONS

CREATE INDEX "IX_Relationship1" ON "TIME_TABLE_POSITIONS" ("DRIVE_ID")
/

-- Add keys for table TIME_TABLE_POSITIONS

ALTER TABLE "TIME_TABLE_POSITIONS" ADD CONSTRAINT "Key2" PRIMARY KEY ("TIME_TABLE_POSITION_ID")
/

-- Table COURSES

CREATE TABLE "COURSES"(
  "COURSE_ID" Integer NOT NULL,
  "TIME_TABLE_POSITION_ID" Integer NOT NULL,
  "BUS_ID" Integer NOT NULL,
  "COURSE_DATE" Date,
  "STATUS" Varchar2(30 ),
  "BUSY_SITS" Integer
)
/

-- Create indexes for table COURSES

CREATE INDEX "IX_Relationship2" ON "COURSES" ("TIME_TABLE_POSITION_ID")
/

CREATE INDEX "IX_Relationship29" ON "COURSES" ("BUS_ID")
/

-- Add keys for table COURSES

ALTER TABLE "COURSES" ADD CONSTRAINT "Key3" PRIMARY KEY ("COURSE_ID")
/

-- Table INTERMEDIATE_DRIVES

CREATE TABLE "INTERMEDIATE_DRIVES"(
  "INTERMEDIATE_DRIVE_ID" Integer NOT NULL,
  "CITY_FROM" Varchar2(30 ) NOT NULL,
  "CITY_TO" Varchar2(30 ) NOT NULL,
  "TIME" Integer,
  "DISTANCE" Integer,
  "PRICE" Float
)
/

-- Add keys for table INTERMEDIATE_DRIVES

ALTER TABLE "INTERMEDIATE_DRIVES" ADD CONSTRAINT "Key4" PRIMARY KEY ("INTERMEDIATE_DRIVE_ID")
/

-- Table CATEGORIES

CREATE TABLE "CATEGORIES"(
  "CATEGORY_ID" Integer NOT NULL,
  "SHORTCUT" Varchar2(30 ),
  "DESCRIPTION" Varchar2(200 ),
  "PRICE_RATE" Float
)
/

-- Add keys for table CATEGORIES

ALTER TABLE "CATEGORIES" ADD CONSTRAINT "Key5" PRIMARY KEY ("CATEGORY_ID")
/

-- Table BUSES

CREATE TABLE "BUSES"(
  "BUS_ID" Integer NOT NULL,
  "CATEGORY_ID" Integer NOT NULL,
  "BUS_MODEL_ID" Integer NOT NULL,
  "BOUGHT_TIME" Date,
  "LICENSE_PLATE" Varchar2(30 ),
  "SERIAL_NUMBER" Varchar2(30 ),
  "SEATS_NUMBER" Integer,
  "MILEAGE" Integer,
  "CLASS_RATE" Float
)
/

-- Create indexes for table BUSES

CREATE INDEX "IX_Relationship6" ON "BUSES" ("CATEGORY_ID")
/

CREATE INDEX "IX_Relationship7" ON "BUSES" ("BUS_MODEL_ID")
/

-- Add keys for table BUSES

ALTER TABLE "BUSES" ADD CONSTRAINT "Key6" PRIMARY KEY ("BUS_ID")
/

-- Table BUS_MODELS

CREATE TABLE "BUS_MODELS"(
  "BUS_MODEL_ID" Integer NOT NULL,
  "NAME" Varchar2(30 ),
  "ENGINE_CAPACITY_CM3" Integer,
  "ENGINE_POWER_KW" Integer,
  "LENGTH_MM" Integer,
  "WIDTH_MM" Integer,
  "MIN_TRUNK_CAPACITY_M3" Float
)
/

-- Add keys for table BUS_MODELS

ALTER TABLE "BUS_MODELS" ADD CONSTRAINT "Key7" PRIMARY KEY ("BUS_MODEL_ID")
/

-- Table SERVICES_BOOK_POSITIONS

CREATE TABLE "SERVICES_BOOK_POSITIONS"(
  "SERVICES_BOOK_POSITION_ID" Integer NOT NULL,
  "BUS_ID" Integer NOT NULL,
  "SERVICE_DATE" Date,
  "MILEAGE_THIS_TIME" Integer,
  "STATE" Varchar2(30 ),
  "CAR_SERVICE_ADDRESS" Varchar2(30 )
)
/

-- Create indexes for table SERVICES_BOOK_POSITIONS

CREATE INDEX "IX_Relationship8" ON "SERVICES_BOOK_POSITIONS" ("BUS_ID")
/

-- Add keys for table SERVICES_BOOK_POSITIONS

ALTER TABLE "SERVICES_BOOK_POSITIONS" ADD CONSTRAINT "Key8" PRIMARY KEY ("SERVICES_BOOK_POSITION_ID")
/

-- Table SERVICE_PLAN_POSITIONS

CREATE TABLE "SERVICE_PLAN_POSITIONS"(
  "SERVICE_PLAN_POSITION_ID" Integer NOT NULL,
  "BUS_MODEL_ID" Integer NOT NULL,
  "MONTHS_TO_SERVICE" Integer,
  "MILEAGE_KM" Integer
)
/

-- Create indexes for table SERVICE_PLAN_POSITIONS

CREATE INDEX "IX_Relationship9" ON "SERVICE_PLAN_POSITIONS" ("BUS_MODEL_ID")
/

-- Add keys for table SERVICE_PLAN_POSITIONS

ALTER TABLE "SERVICE_PLAN_POSITIONS" ADD CONSTRAINT "Key9" PRIMARY KEY ("SERVICE_PLAN_POSITION_ID")
/

-- Table CLIENTS

CREATE TABLE "CLIENTS"(
  "CLIENT_ID" Integer NOT NULL,
  "PERSON_ID" Integer,
  "FIRST_SERVICE_USE_DATE" Date,
  "DESCRIPTION" Varchar2(30 ),
  "DISCOUNT_ON_DRIVE" Float DEFAULT 0
)
/

-- Create indexes for table CLIENTS

CREATE INDEX "IX_Relationship27" ON "CLIENTS" ("PERSON_ID")
/

-- Add keys for table CLIENTS

ALTER TABLE "CLIENTS" ADD CONSTRAINT "Key10" PRIMARY KEY ("CLIENT_ID")
/

-- Table PERSONS

CREATE TABLE "PERSONS"(
  "PERSON_ID" Integer NOT NULL,
  "PESEL" Varchar2(30 ) NOT NULL,
  "NAME" Varchar2(30 ),
  "SURNAME" Varchar2(30 ),
  "COUNTRY" Varchar2(40 ),
  "CITY" Varchar2(30 ),
  "STREET" Varchar2(50 ),
  "PHONE_NUMBER" Varchar2(30 ),
  "E_MAIL" Varchar2(100 )
)
/

-- Add keys for table PERSONS

ALTER TABLE "PERSONS" ADD CONSTRAINT "Key11" PRIMARY KEY ("PERSON_ID")
/

ALTER TABLE "PERSONS" ADD CONSTRAINT "PESEL" UNIQUE ("PESEL")
/

-- Table RESERVATIONS

CREATE TABLE "RESERVATIONS"(
  "RESERVATION_ID" Integer NOT NULL,
  "CLIENT_ID" Integer NOT NULL,
  "COURSE_ID" Integer NOT NULL,
  "SEAT_NUMBER" Integer,
  "STATUS" Varchar2(30 )
)
/

-- Create indexes for table RESERVATIONS

CREATE INDEX "IX_Relationship11" ON "RESERVATIONS" ("COURSE_ID")
/

CREATE INDEX "IX_Relationship12" ON "RESERVATIONS" ("CLIENT_ID")
/

-- Add keys for table RESERVATIONS

ALTER TABLE "RESERVATIONS" ADD CONSTRAINT "Key12" PRIMARY KEY ("RESERVATION_ID")
/

-- Table DRIVERS

CREATE TABLE "DRIVERS"(
  "DRIVER_ID" Integer NOT NULL,
  "PERSON_ID" Integer NOT NULL,
  "PSYCHOLOGICAL_TESTS_RESULT" Varchar2(50 ),
  "TRAINING_COURSES" Varchar2(50 ),
  "DRIVING_LICENCE_NUMBER" Varchar2(30 ),
  "DRIVING_LICENCE_CATEGORY" Varchar2(30 )
)
/

-- Create indexes for table DRIVERS

CREATE INDEX "IX_Relationship16" ON "DRIVERS" ("PERSON_ID")
/

-- Add keys for table DRIVERS

ALTER TABLE "DRIVERS" ADD CONSTRAINT "Key13" PRIMARY KEY ("DRIVER_ID")
/

-- Table HOSTESS

CREATE TABLE "HOSTESS"(
  "HOSTESS_ID" Integer NOT NULL,
  "PERSON_ID" Integer NOT NULL,
  "CURRENT_STAY" Varchar2(50 ),
  "COURSES" Varchar2(50 )
)
/

-- Create indexes for table HOSTESS

CREATE INDEX "IX_Relationship17" ON "HOSTESS" ("PERSON_ID")
/

-- Add keys for table HOSTESS

ALTER TABLE "HOSTESS" ADD CONSTRAINT "Key14" PRIMARY KEY ("HOSTESS_ID")
/

-- Table LANGUAGES

CREATE TABLE "LANGUAGES"(
  "LANGUAGE_ID" Integer NOT NULL,
  "NAME" Varchar2(30 )
)
/

-- Add keys for table LANGUAGES

ALTER TABLE "LANGUAGES" ADD CONSTRAINT "Key15" PRIMARY KEY ("LANGUAGE_ID")
/

-- Table KNOWN_LANGUAGES

CREATE TABLE "KNOWN_LANGUAGES"(
  "HOSTESS_ID" Integer NOT NULL,
  "LANGUAGE_ID" Integer NOT NULL,
  "FLUENCY" Varchar2(30 ),
  "STUDING_YEARS" Float
)
/

-- Create indexes for table KNOWN_LANGUAGES

CREATE INDEX "IX_Relationship14" ON "KNOWN_LANGUAGES" ("LANGUAGE_ID")
/

CREATE INDEX "IX_Relationship15" ON "KNOWN_LANGUAGES" ("HOSTESS_ID")
/

-- Table GRAPHIC_POSITIONS

CREATE TABLE "GRAPHIC_POSITIONS"(
  "GRAPHIC_POSITION_ID" Integer NOT NULL,
  "HOSTESS_ID" Integer,
  "DRIVER_ID" Integer,
  "COURSE_ID" Integer,
  "TIME_FROM" Date,
  "STATUS" Varchar2(30 ),
  "HOURLY_BID" Float,
  "TIME_TO" Date
)
/

-- Create indexes for table GRAPHIC_POSITIONS

CREATE INDEX "IX_Relationship21" ON "GRAPHIC_POSITIONS" ("HOSTESS_ID")
/

CREATE INDEX "IX_Relationship20" ON "GRAPHIC_POSITIONS" ("DRIVER_ID")
/

CREATE INDEX "IX_Relationship28" ON "GRAPHIC_POSITIONS" ("COURSE_ID")
/

-- Add keys for table GRAPHIC_POSITIONS

ALTER TABLE "GRAPHIC_POSITIONS" ADD CONSTRAINT "Key17" PRIMARY KEY ("GRAPHIC_POSITION_ID")
/

-- Table SERVICES

CREATE TABLE "SERVICES"(
  "SERVICE_ID" Integer NOT NULL,
  "OPERATION" Varchar2(70 ),
  "MEANINGNESS" Varchar2(30 )
)
/

-- Add keys for table SERVICES

ALTER TABLE "SERVICES" ADD CONSTRAINT "Key18" PRIMARY KEY ("SERVICE_ID")
/

-- Table SERVICE_ACCOMPLISHMENTS

CREATE TABLE "SERVICE_ACCOMPLISHMENTS"(
  "SERVICES_BOOK_POSITION_ID" Integer NOT NULL,
  "SERVICE_ID" Integer NOT NULL,
  "PRICE" Float
)
/

-- Create indexes for table SERVICE_ACCOMPLISHMENTS

CREATE INDEX "IX_Relationship34" ON "SERVICE_ACCOMPLISHMENTS" ("SERVICE_ID")
/

CREATE INDEX "IX_Relationship33" ON "SERVICE_ACCOMPLISHMENTS" ("SERVICES_BOOK_POSITION_ID")
/

-- Table POSITION_REQUIREMENTS

CREATE TABLE "POSITION_REQUIREMENTS"(
  "SERVICE_PLAN_POSITION_ID" Integer NOT NULL,
  "SERVICE_ID" Integer NOT NULL
)
/

-- Create indexes for table POSITION_REQUIREMENTS

CREATE INDEX "IX_Relationship36" ON "POSITION_REQUIREMENTS" ("SERVICE_PLAN_POSITION_ID")
/

CREATE INDEX "IX_Relationship37" ON "POSITION_REQUIREMENTS" ("SERVICE_ID")
/

-- Table DRIVE_CONTENTS

CREATE TABLE "DRIVE_CONTENTS"(
  "INTERMEDIATE_DRIVE_ID" Integer NOT NULL,
  "DRIVE_ID" Integer NOT NULL
)
/

-- Create indexes for table DRIVE_CONTENTS

CREATE INDEX "IX_Relationship39" ON "DRIVE_CONTENTS" ("DRIVE_ID")
/

CREATE INDEX "IX_Relationship38" ON "DRIVE_CONTENTS" ("INTERMEDIATE_DRIVE_ID")
/

-- Table STAFF_COURSE_MEMBERS

CREATE TABLE "STAFF_COURSE_MEMBERS"(
  "COURSE_ID" Integer NOT NULL,
  "PERSON_ID" Integer NOT NULL
)
/

-- Create indexes for table STAFF_COURSE_MEMBERS

CREATE INDEX "IX_Relationship40" ON "STAFF_COURSE_MEMBERS" ("COURSE_ID")
/

CREATE INDEX "IX_Relationship41" ON "STAFF_COURSE_MEMBERS" ("PERSON_ID")
/

-- Create relationships section ------------------------------------------------- 

ALTER TABLE "TIME_TABLE_POSITIONS" ADD CONSTRAINT "Relationship1" FOREIGN KEY ("DRIVE_ID") REFERENCES "DRIVES" ("DRIVE_ID")
/

ALTER TABLE "COURSES" ADD CONSTRAINT "Relationship2" FOREIGN KEY ("TIME_TABLE_POSITION_ID") REFERENCES "TIME_TABLE_POSITIONS" ("TIME_TABLE_POSITION_ID")
/

ALTER TABLE "BUSES" ADD CONSTRAINT "Relationship6" FOREIGN KEY ("CATEGORY_ID") REFERENCES "CATEGORIES" ("CATEGORY_ID")
/

ALTER TABLE "BUSES" ADD CONSTRAINT "Relationship7" FOREIGN KEY ("BUS_MODEL_ID") REFERENCES "BUS_MODELS" ("BUS_MODEL_ID")
/

ALTER TABLE "SERVICES_BOOK_POSITIONS" ADD CONSTRAINT "Relationship8" FOREIGN KEY ("BUS_ID") REFERENCES "BUSES" ("BUS_ID")
/

ALTER TABLE "SERVICE_PLAN_POSITIONS" ADD CONSTRAINT "Relationship9" FOREIGN KEY ("BUS_MODEL_ID") REFERENCES "BUS_MODELS" ("BUS_MODEL_ID")
/

ALTER TABLE "RESERVATIONS" ADD CONSTRAINT "Relationship11" FOREIGN KEY ("COURSE_ID") REFERENCES "COURSES" ("COURSE_ID")
/

ALTER TABLE "RESERVATIONS" ADD CONSTRAINT "Relationship12" FOREIGN KEY ("CLIENT_ID") REFERENCES "CLIENTS" ("CLIENT_ID")
/

ALTER TABLE "KNOWN_LANGUAGES" ADD CONSTRAINT "Relationship14" FOREIGN KEY ("LANGUAGE_ID") REFERENCES "LANGUAGES" ("LANGUAGE_ID")
/

ALTER TABLE "KNOWN_LANGUAGES" ADD CONSTRAINT "Relationship15" FOREIGN KEY ("HOSTESS_ID") REFERENCES "HOSTESS" ("HOSTESS_ID")
/

ALTER TABLE "DRIVERS" ADD CONSTRAINT "Relationship16" FOREIGN KEY ("PERSON_ID") REFERENCES "PERSONS" ("PERSON_ID")
/

ALTER TABLE "HOSTESS" ADD CONSTRAINT "Relationship17" FOREIGN KEY ("PERSON_ID") REFERENCES "PERSONS" ("PERSON_ID")
/

ALTER TABLE "GRAPHIC_POSITIONS" ADD CONSTRAINT "Relationship20" FOREIGN KEY ("DRIVER_ID") REFERENCES "DRIVERS" ("DRIVER_ID")
/

ALTER TABLE "GRAPHIC_POSITIONS" ADD CONSTRAINT "Relationship21" FOREIGN KEY ("HOSTESS_ID") REFERENCES "HOSTESS" ("HOSTESS_ID")
/

ALTER TABLE "CLIENTS" ADD CONSTRAINT "Relationship27" FOREIGN KEY ("PERSON_ID") REFERENCES "PERSONS" ("PERSON_ID")
/

ALTER TABLE "GRAPHIC_POSITIONS" ADD CONSTRAINT "Relationship28" FOREIGN KEY ("COURSE_ID") REFERENCES "COURSES" ("COURSE_ID")
/

ALTER TABLE "COURSES" ADD CONSTRAINT "Relationship29" FOREIGN KEY ("BUS_ID") REFERENCES "BUSES" ("BUS_ID")
/

ALTER TABLE "SERVICE_ACCOMPLISHMENTS" ADD CONSTRAINT "Relationship33" FOREIGN KEY ("SERVICES_BOOK_POSITION_ID") REFERENCES "SERVICES_BOOK_POSITIONS" ("SERVICES_BOOK_POSITION_ID")
/

ALTER TABLE "SERVICE_ACCOMPLISHMENTS" ADD CONSTRAINT "Relationship34" FOREIGN KEY ("SERVICE_ID") REFERENCES "SERVICES" ("SERVICE_ID")
/

ALTER TABLE "POSITION_REQUIREMENTS" ADD CONSTRAINT "Relationship36" FOREIGN KEY ("SERVICE_PLAN_POSITION_ID") REFERENCES "SERVICE_PLAN_POSITIONS" ("SERVICE_PLAN_POSITION_ID")
/

ALTER TABLE "POSITION_REQUIREMENTS" ADD CONSTRAINT "Relationship37" FOREIGN KEY ("SERVICE_ID") REFERENCES "SERVICES" ("SERVICE_ID")
/

ALTER TABLE "DRIVE_CONTENTS" ADD CONSTRAINT "Relationship38" FOREIGN KEY ("INTERMEDIATE_DRIVE_ID") REFERENCES "INTERMEDIATE_DRIVES" ("INTERMEDIATE_DRIVE_ID")
/

ALTER TABLE "DRIVE_CONTENTS" ADD CONSTRAINT "Relationship39" FOREIGN KEY ("DRIVE_ID") REFERENCES "DRIVES" ("DRIVE_ID")
/

ALTER TABLE "STAFF_COURSE_MEMBERS" ADD CONSTRAINT "Relationship40" FOREIGN KEY ("COURSE_ID") REFERENCES "COURSES" ("COURSE_ID")
/

ALTER TABLE "STAFF_COURSE_MEMBERS" ADD CONSTRAINT "Relationship41" FOREIGN KEY ("PERSON_ID") REFERENCES "PERSONS" ("PERSON_ID")
/



